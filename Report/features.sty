\NeedsTeXFormat{LaTeX2e}[1994/06/01]
\ProvidesPackage{features}
  [2011/01/11 v0.01 LaTeX package for my own purpose]
\RequirePackage{graphicx}
\RequirePackage{subcaption}
\RequirePackage{float}
\RequirePackage[font=scriptsize]{subfig}
\RequirePackage[font=small]{caption}
\graphicspath{/Users/samstern/Uni/Honours_Project/Report/fig}



%%Figure Boxplots

%Month Sum

\def\monthSum{
\begin{figure}[H]
        %\centering
        \begin{subfigure}{0.5\textwidth}
                \includegraphics[width=\textwidth]{fig/Features/Total_Electricity_child}
                                          %\hspace*{-3cm}  
              % \input{fig/Total_Electricity_child.tex}
                \caption[font=scriptsize]{Total electricity used by households in a 28 day period, grouped by whether the household has chidren or not}
        \end{subfigure}
        \begin{subfigure}{0.55\textwidth}
                \includegraphics[width=\textwidth]{fig/Features/Total_Electricity_socio}
                %\input{fig/Total_Electricity_socio.tex}     
                 \caption[font=scriptsize]{Total electricity used by households in a 28 day period, grouped by the IPSOS social grade of the household}
        \end{subfigure}
        \caption{Total electricity used by households over a 28-day period grouped by the presence of children (left) and socio-economic status (right).}
        \label{fig:monthSum}
\end{figure}
}

\def\monthSumChild{
\begin{figure}[H]
%\begin{center}
\input{fig/Total_Electricity_child.tex}
\caption{Total electricity used by households in a 28 day period, grouped by whether the household has children or not}
%\end{center}
\caption{}
\end{figure}
}

\def\monthSumSocio{
\begin{figure}[H]
%\begin{center}
\input{fig/Total_Electricity_socio.tex}
\caption{Total electricity used by households in a 28 day period, grouped by the Ipsos social grade of the household}
%\end{center}
\caption{}
\end{figure}
}

%% Average Daily
\def\averageDay{
\begin{figure}[H]
        \centering
        \begin{subfigure}[b]{0.5\textwidth}
               % \input{fig/Average_Daily_child.tex}
               \includegraphics[width=\textwidth]{fig/Features/Day_Average_child}
                \caption{The average total energy used on each day of the week. Households are grouped by whether or not there are children present}
        \end{subfigure}
        \begin{subfigure}[b]{0.5\textwidth}
                %\input{fig/Average_Daily_socio.tex}
                \includegraphics[width=\textwidth]{fig/Features/Day_Average_socio}
                \caption{The average total energy used on each day of the week. Households are grouped by their Ipsos mori social grade}
        \end{subfigure}
        \label{fig:averageDay}
\end{figure}
}

\def\averageDayChild{
\begin{figure}[H]
\centering
%\resizebox{.9\linewidth}{3in}{\input{fig/Average_Daily_child.tex}}
 \includegraphics[width=\textwidth]{fig/Features/Day_Average_child}
\caption{The total energy used per day, averaged over a four-week period, and grouped according to the presence of children. `C' refers to households with children and `NC' refers to those without children.}
%\end{center}
\caption{}
\label{fig:averageDayChild}
\end{figure}
}

\def\averageDaySocio{
\begin{figure}[H]
\centering
%\input{fig/Average_Daily_socio.tex}
\includegraphics[width=\textwidth]{fig/Features/Day_Average_socio}
\caption{The total energy used per day, averaged over a four-week period, and grouped according to their Ipsos mori social grade}
\label{fig:averageDaySocio}
\end{figure}
}


%% POW_rat
\def\POWrat{
\begin{figure}[H]
%        \centering
        \begin{subfigure}[t]{0.5\textwidth}
%        		\hspace*{-3cm}
%                \input{fig/POW_rat_child.tex}
%\resizebox{.5\linewidth}{!}{\input{fig/POW_rat_child.tex}}
\includegraphics[width=\textwidth, height=2.5in]{fig/Features/POW_rat_child}
%                \caption{The ratio between how much energy is used on the weekends and how much is used on weekdays. Households are grouped on whether or not there are children present}
        \end{subfigure}%
        \begin{subfigure}[t]{0.5\textwidth}
        \includegraphics[width=\textwidth, height=2.5in]{fig/Features/POW_rat_socio}
%                \input{fig/POW_rat_socio.tex}
% \resizebox{.5\linewidth}{!}{\input{fig/POW_rat_socio.tex}}
%                \caption{The ratio between how much energy is used on the weekends and how much is used on weekdays. Households are grouped on their IPSOS social grade}
        \end{subfigure}
        \caption{The ratio between the energy used on weekend days and the total used during the week, averaged over a four week period. This shows how the amount of energy used during the week compares to that used at the weekends.}
%        \label{fig:POWrat}
\end{figure}
}

\def\POWratChild{
\begin{figure}[H]
%\begin{center}
\input{fig/POW_rat_child.tex}
%\end{center}
\caption{The ratio between how much energy is used on the weekends and how much is used on weekdays. Households are grouped on whether or not there are children present}
\label{fig:POWratChild}
\end{figure}
}

\def\POWratSocio{
\begin{figure}[H]
\centering
\input{fig/POW_rat_socio.tex}
\caption{The ratio between how much energy is used on the weekends and how much is used on weekdays. Households are their IPSOS social grade}
\caption{}
\label{fig:POWratSocio}
\end{figure}
}

%% APOD
\def\APOD{
\begin{figure}[H]
        \centering
        \begin{subfigure}[b]{0.5\textwidth}
                \input{fig/APOD_child.tex}
        \end{subfigure}%
        \begin{subfigure}[b]{0.5\textwidth}
                \input{fig/APOD_socio.tex}
        \end{subfigure}
        \label{fig:APOD}
\end{figure}
}

\def\APODChild{
\begin{figure}[H]
%\begin{center}
\centering
%\input{fig/APOD_child.tex}
\includegraphics[width=\textwidth]{fig/Features/APOD_child}
%\end{center}
\caption{}
\label{fig:APODChild}
\end{figure}
}

\def\APODSocio{
\begin{figure}[H]
\centering
%\input{fig/APOD_socio.tex}
\includegraphics[scale=0.7]{fig/Features/APOD_socio}
\caption{}
\label{fig:APODSocio}
\end{figure}
}


%% ADV
\def\ADV{
\begin{figure}[H]
        \centering
        \begin{subfigure}[b]{0.5\textwidth}
                \includegraphics[width=\textwidth]{fig/ADV_child}
        \end{subfigure}%
        \begin{subfigure}[b]{0.7\textwidth}
                \includegraphics[width=\textwidth]{fig/ADV_socio}
        \end{subfigure}
        \caption{}
        \label{fig:ADV}
\end{figure}
}

\def\ADVChild{
\begin{figure}[H]
%\begin{center}
\centering{\includegraphics[scale=0.5]{fig/ADV_child}}
%\end{center}
\caption{}
\label{fig:ADVChild}
\end{figure}
}

\def\ADVSocio{
\begin{figure}[H]
\centering
\centerline{\includegraphics[scale=0.5]{fig/ADV_socio}}
\caption{}
\label{fig:ADVSocio}
\end{figure}
}

%%log  ADV
\def\logADV{
\begin{figure}[H]
        \centering
        \begin{subfigure}[b]{0.5\textwidth}
                %\includegraphics[width=\textwidth]{fig/log_ADV_child}
                 \input{fig/ADV_child.tex}
        \end{subfigure}%
        \begin{subfigure}[b]{0.5\textwidth}
                %\includegraphics[width=\textwidth]{fig/log_ADV_socio}
                 \input{fig/ADV_socio.tex}
        \end{subfigure}
        \caption{}
        \label{fig:logADV}
\end{figure}
}

\def\logADVChild{
\begin{figure}[H]
%\begin{center}
%\centering{\includegraphics[scale=0.5]{fig/log_ADV_child}}
\centering
%\resizebox{.9\linewidth}{3in}{\input{fig/ADV_child.tex}}
\includegraphics[width=\textwidth]{fig/Features/log_ADV_child}
%\end{center}
\caption{The variance of a household's daily consumption grouped by the day of the week and whether the household has children (C) or not (NC)}
\label{fig:logADVChild}
\end{figure}
}

\def\logADVSocio{
\begin{figure}[H]
\centering
\includegraphics[width=\textwidth, height=3in]{fig/Features/log_ADV_socio}
%\input{fig/ADV_socio.tex}
\caption{The variance of a household's daily consumption grouped by the day of the week and the Ipsos mori social grade}
\label{fig:logADVSocio}
\end{figure}
}

%%corr
\def\corr{
\begin{figure}[H]
        \centering
        \begin{subfigure}[b]{0.5\textwidth}
                \input{fig/Corr_child.tex}
        \end{subfigure}%
        \begin{subfigure}[b]{0.5\textwidth}
               \input{fig/Corr_socio.tex}
        \end{subfigure}
        \caption{}
        \label{fig:corr}
\end{figure}
}

\def\corrChild{
\begin{figure}[H]
%\begin{center}
\hspace{-2cm}
%\input{fig/Corr_child.tex}
\centering
\includegraphics[width=\textwidth]{fig/Features/Corr_child}
%\end{center}
\caption{Average correlation coefficient between weekdays grouped by whether a household has children (C) or not (NC)}
\label{fig:corrChild}
\end{figure}
}

\def\corrSocio{
\begin{figure}[H]
\centering
\hspace{-2cm}
\includegraphics[width=\textwidth]{fig/Features/Corr_socio}
\caption{Average correlation coefficient between weekdays grouped by Ipsos social grade}
\label{fig:corrSocio}
\end{figure}
}

%% Timeseries Plots

\def\householdConv{
\begin{figure}[H]
\centering
%\centerline{\includegraphics[scale=0.5]{fig/household369Conv}}
\hspace*{-2.5cm}
\input{fig/household369Conv.tex}
\caption{The electricity use of household No.369 shows that households may have both a daily and weekly pattern. The clusters of peaks represent individual days while the regions without peaks are the indicative of night time. Additionaly, the large spikes are observed roughly every seven days, on either Saturdays, Sundays or both. After applying the Gaussian filter, the time series maintains its temporal structure however the sharp peaks are smoothed, which would not be handled well by the Fourier transform}
\label{fig:household369Conv}
\end{figure}
}

\def\householdPlot{
\begin{figure}[H]
\centering
\includegraphics[width=\textwidth]{fig/household369}
%\hspace*{-1in}
%\input{fig/household369.tex}
\caption{The electricity use of household No.369 over a four week period after being pre-processed}
\label{fig:household369}
\end{figure}
}

\def\householdOneWeek{
\begin{figure}[H]
\centering
\includegraphics[scale=0.5]{fig/household369OneWeek}
%\hspace*{-1in}
%\input{fig/household369OneWeek.tex}
\caption{The electricity use of household No.369 over a week after being pre-processed}
\label{fig:household369OneWeek}
\end{figure}
}
% households 75 and 121
\def\badHouseholds{
\begin{figure}[H]
       % \hspace*{-3cm}                                                           
        %\begin{subfigure}[b]{0.7\textwidth}
        	%\hspace{2mm}
        	\centering
                \includegraphics[width=\textwidth]{fig/householdBad}
       %         \input{fig/household75.tex}
       % \end{subfigure}%
       % \begin{subfigure}[b]{0.7\textwidth}
        		%\hspace{2mm}
               % \includegraphics[width=\textwidth]{fig/household121}
       %        \input{fig/household121.tex}
       % \end{subfigure}
        \caption{The electricity consumption of two households that do not show the same pattern of consumption as other households}
        \label{fig:badHouseholds}
\end{figure}
}



%% qq

\def\qqPlot{
\begin{figure}[H]
        \centering
                \includegraphics[width=\textwidth]{fig/qqtransformed}
        \caption{}
        \label{fig:qqPlot}
\end{figure}
}

%% Appliances table
\def\applianceTable{
\begin{table}[h]
\caption{\textbf{Energy used by various household appliances}}
\begin{tabular}{|l|l|l|l|l|}
\hline
\textbf{Appliance}  & \textbf{Rating} & \textbf{} & \textbf{Appliance}   & \textbf{Rating} \\ \hline
Immersion heater    & 3,000W          &           & Fridge               & 40-120W         \\ \hline
Electric fire       & 2,000-3,000W    &           & Fridge-freezer       & 200-400W        \\ \hline
Oil-filled radiator & 1,500-2,500W    &           & Freeze               & 150W            \\ \hline
Electric shower     & 7,000-10,500W   &           & Electric mower       & 500-1,500W      \\ \hline
Dishwasher          & 1,050-1,500W    &           & Electric drill       & 900-1,000W      \\ \hline
Washing machine     & 1,200-3,000W    &           & Hairdryer            & 1,000W          \\ \hline
Tumble dryer        & 2,000-4,000W    &           & Heating blanket      & 130-200W        \\ \hline
Toaster             & 800-1,500W      &           & Games console        & 45-190W         \\ \hline
Kettle              & 2,200-3,000W    &           & Laptop               & 20-50W          \\ \hline
Microwave           & 600-1,500W      &           & Desktop computer     & 80-150W         \\ \hline
Oven                & 2,000-2,200W    &           & Tablet (charge)      & 10W             \\ \hline
Grill/hob           & 1,000-2,000W    &           & Broadband router     & 7-10W           \\ \hline
 LCD TV               & 125-200W        &           & Smart phone (charge) & 2.5-5W          \\ \hline
\end{tabular}
\label{tab:applianceTable}

\end{table}
}

%%Class Tables

\def\sgTable{
\begin{table}[h]
\hspace{-2cm}
\footnotesize
%\centering
\begin{tabular}{lllll}
%\hline
\textbf{\begin{tabular}[c]{@{}l@{}}Social \\ Grade\end{tabular}} & \textbf{Description}                                                                                                                & \textbf{Sample Size} & \textbf{\% Sample} & \textbf{\% UK Population} \\ \hline
A                                                                & \begin{tabular}[c]{@{}l@{}}High managerial, administrative or \\ professional\end{tabular}                                          & 33                   & 6.4                & 4                      \\ %\hline
B                                                                & \begin{tabular}[c]{@{}l@{}}Intermediate managerial, \\ administrative or professional\end{tabular}                                  & 95                   & 18.3               & 23                     \\ %\hline
C1                                                               & \begin{tabular}[c]{@{}l@{}}Supervisory, clerical and junior managerial, \\ administrative or professional\end{tabular}              & 197                  & 38.0               & 29                     \\ %\hline
C2                                                               & Skilled manual workers                                                                                                              & 128                  & 24.7               & 21                     \\ %\hline
D                                                                & Semi and unskilled manual workers                                                                                                   & 34                   & 6.6                & 15                     \\ %\hline
E                                                                & \begin{tabular}[c]{@{}l@{}}State pensioners, casual or \\ lowest grade workers, \\ unemployed with state benefits only\end{tabular} & 32                   & 6.2                & 8                      \\ %\hline
\end{tabular}
\caption{}
\label{tab:sgTable}
\end{table}
}

\def\childTable{
\begin{table}[h]
\centering
\begin{tabular}{llll}
\textbf{Class} & \textbf{Sample Size} & \textbf{\% Sample} & \textbf{\% UK Population} \\ \hline
Children       & 187                  & 36                 & 39                     \\
No Children    & 332                  & 64                 & 61                    
\end{tabular}
\caption{}
\label{tab:childTable}
\end{table}
}


%% Visualisation of 28 days

\def\to28days{
\begin{figure}[H]
\centerline{\includegraphics[scale=0.6]{fig/preProcess}}
\caption{}
\label{fig:preProcess}
\end{figure}
}

%% Optimal Features Table
\def\childFeatures{
\begin{table}[H]
\centering
\scriptsize
\tabcolsep=0.1cm
\hspace{-2cm}
\small 
\begin{tabular}{llll}
\multicolumn{4}{c}{\textbf{Children}} 
 \\ \hline
\multicolumn{3}{|c|}{\textbf{SFS}}                   & \multicolumn{1}{c|}{\textbf{Manual}}        \\ \hline
\multicolumn{1}{|l|}{\textbf{Log Reg}}           & \multicolumn{1}{l|}{\textbf{KNN}}              & \multicolumn{1}{l|}{\textbf{Rand Forest}}      & \multicolumn{1}{l|}{\textbf{}}              \\ \hline
\multicolumn{1}{|l|}{Mon Daytime}             & \multicolumn{1}{l|}{Mon Evening}            & \multicolumn{1}{l|}{Thur Total}            & \multicolumn{1}{l|}{Month Total}            \\ \hline
\multicolumn{1}{|l|}{Tue Evening}            & \multicolumn{1}{l|}{Mon Night}              & \multicolumn{1}{l|}{Sun Night}              & \multicolumn{1}{l|}{Sun Daytime}         \\ \hline
\multicolumn{1}{|l|}{Wedy Night}            & \multicolumn{1}{l|}{Wed Evening}         & \multicolumn{1}{l|}{Mon Morning}            & \multicolumn{1}{l|}{Sat Evening}       \\ \hline
\multicolumn{1}{|l|}{Thur Daytime}           & \multicolumn{1}{l|}{Fri Morning}            & \multicolumn{1}{l|}{Mon Daytime}            & \multicolumn{1}{l|}{Thurs Variance}      \\ \hline
\multicolumn{1}{|l|}{Fri Morning}             & \multicolumn{1}{l|}{Sat/Weekday Ratio}    & \multicolumn{1}{l|}{Mon Evening}            & \multicolumn{1}{l|}{Mon Morning}         \\ \hline
\multicolumn{1}{|l|}{Tue Variance}           & \multicolumn{1}{l|}{Sun Variance}           & \multicolumn{1}{l|}{Tue Daytime}           & \multicolumn{1}{l|}{Fri Evening}         \\ \hline
\multicolumn{1}{|l|}{Thury Variance}          & \multicolumn{1}{l|}{Mon Variance}           & \multicolumn{1}{l|}{Fri Night}              & \multicolumn{1}{l|}{Sat Variance}      \\ \hline
\multicolumn{1}{|l|}{Saty Variance}          & \multicolumn{1}{l|}{$\rho$(Mon Thur)}   & \multicolumn{1}{l|}{Thur Variance}         & \multicolumn{1}{l|}{Mon Total}           \\ \hline
\multicolumn{1}{|l|}{$\rho$(Mon Tue)}     & \multicolumn{1}{l|}{$\rho$(Mon Friy)}     & \multicolumn{1}{l|}{Fri Variance}           & \multicolumn{1}{l|}{Sat Total}         \\ \hline
\multicolumn{1}{|l|}{$\rho$(Wed Thur)} & \multicolumn{1}{l|}{$\rho$(Tue Wed)} & \multicolumn{1}{l|}{$\rho$(Mon Wed)} & \multicolumn{1}{l|}{$\rho$(Mon Tue)} \\ \hline
\end{tabular}
\caption{}
\label{tab:childFeatures}
\end{table}
}

\def\socioFeatures{
\begin{table}[H]
\tabcolsep=0.1cm
\hspace{-1cm}
\footnotesize 
\begin{tabular}{lllll}
\multicolumn{5}{c}{\textbf{Social Grade}} 
 \\ \hline
\multicolumn{4}{|c|}{\textbf{SFS}}         & \multicolumn{1}{c|}{\textbf{Manual}}        \\ \hline
\multicolumn{1}{|l|}{\textbf{Ord Log Reg}}        & \multicolumn{1}{l|}{\textbf{Nom Log Reg}} & \multicolumn{1}{l|}{\textbf{KNN}}                & \multicolumn{1}{l|}{\textbf{Rand Forest}}        & \multicolumn{1}{l|}{\textbf{}}              \\ \hline
\multicolumn{1}{|l|}{Mon Morning}              & \multicolumn{1}{l|}{Fri Total}         & \multicolumn{1}{l|}{Fri Total}                & \multicolumn{1}{l|}{Sun Total}                & \multicolumn{1}{l|}{Mon Night}           \\ \hline
\multicolumn{1}{|l|}{Tue Morning}             & \multicolumn{1}{l|}{Mon Morning}       & \multicolumn{1}{l|}{Tue Morning}             & \multicolumn{1}{l|}{Wed Total}             & \multicolumn{1}{l|}{Tue Variance}       \\ \hline
\multicolumn{1}{|l|}{Tue Daytime}             & \multicolumn{1}{l|}{Tue Morning}      & \multicolumn{1}{l|}{Wed Night}             & \multicolumn{1}{l|}{Mon Morning}              & \multicolumn{1}{l|}{Mon Total}           \\ \hline
\multicolumn{1}{|l|}{Fri Night}                & \multicolumn{1}{l|}{Tue Daytime}      & \multicolumn{1}{l|}{Thur Morning}            & \multicolumn{1}{l|}{Mon Night}                & \multicolumn{1}{l|}{Tue day}            \\ \hline
\multicolumn{1}{|l|}{Fri Variance}             & \multicolumn{1}{l|}{Wed Morning}    & \multicolumn{1}{l|}{Fri Morning}              & \multicolumn{1}{l|}{Wed Morning}           & \multicolumn{1}{l|}{Sun Night}           \\ \hline
\multicolumn{1}{|l|}{Sat Variance}           & \multicolumn{1}{l|}{Wed Daytime}    & \multicolumn{1}{l|}{Sat Evening}            & \multicolumn{1}{l|}{Wed Evening}           & \multicolumn{1}{l|}{Thur Night}         \\ \hline
\multicolumn{1}{|l|}{$\rho$(Mon Tue)}      & \multicolumn{1}{l|}{Wed Evening}    & \multicolumn{1}{l|}{Sun Total}              & \multicolumn{1}{l|}{Fri Night}                & \multicolumn{1}{l|}{$\rho$(Tue,Fri)} \\ \hline
\multicolumn{1}{|l|}{$\rho$(Mon Fri)}       & \multicolumn{1}{l|}{Friday Morning}    & \multicolumn{1}{l|}{Thur Variance}           & \multicolumn{1}{l|}{Thur Variance}           & \multicolumn{1}{l|}{Thur Total}         \\ \hline
\multicolumn{1}{|l|}{$\rho$(Wed Fri)} & \multicolumn{1}{l|}{Fri Night}         & \multicolumn{1}{l|}{Fri Variance}             & \multicolumn{1}{l|}{$\rho$(Mon Fri)}       & \multicolumn{1}{l|}{Sat Night}         \\ \hline
\multicolumn{1}{|l|}{First Fourier Feature}       & \multicolumn{1}{l|}{Sat Daytime}     & \multicolumn{1}{l|}{$\rho$(Wed, Thur)} & \multicolumn{1}{l|}{First Fourier Feature} & \multicolumn{1}{l|}{Fri Evening}         \\ \hline
\end{tabular}
\caption{}
\label{tab:socioFeatures}
\end{table}
}

%ordered logit fig
\def\orderedLogit{
\begin{figure}[H]
        \centering
         \includegraphics[width=\textwidth]{fig/ordered_logit}
        \caption{The proportional odds model assumes that the regression function for different response categories are parallel on the logit scale. Figure obtained from: http://www.datavis.ca/courses/grcat}
        \label{fig:orderedLogit}
\end{figure}
}



